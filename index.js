import{A as ve,S as be,N as we,P as Ee}from"./assets/vendor-CapZ6wWX.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const m of i.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&s(m)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();document.addEventListener("DOMContentLoaded",()=>{console.log("Header script initialized");const e=document.getElementById("burger"),t=document.getElementById("mobileMenu"),n=document.getElementById("closeMenu"),s=document.getElementById("logo"),o=document.body,i=document.getElementById("loader"),m=document.getElementById("notification"),h=(c=!0)=>{e==null||e.classList.toggle("active",c),t==null||t.classList.toggle("active",c),o.classList.toggle("menu-open",c)};e==null||e.addEventListener("click",()=>h(!0)),n==null||n.addEventListener("click",()=>h(!1)),t==null||t.addEventListener("click",c=>{c.target===t&&h(!1)}),document.addEventListener("keydown",c=>{c.key==="Escape"&&(t!=null&&t.classList.contains("active"))&&h(!1)}),document.querySelectorAll(".mobile-nav-link, .mobile-cta-button").forEach(c=>{c.addEventListener("click",()=>h(!1))}),document.querySelectorAll('a[href^="#"]').forEach(c=>{c.addEventListener("click",d=>{d.preventDefault();const A=c.getAttribute("href").substring(1),T=document.getElementById(A);T==null||T.scrollIntoView({behavior:"smooth",block:"start"})})}),s==null||s.addEventListener("click",c=>{c.preventDefault(),window.scrollTo({top:0,behavior:"smooth"})});const P=()=>i&&(i.style.display="flex"),w=()=>i&&(i.style.display="none");w();const k=(c,d="error")=>{m&&(m.textContent=c,m.className=`notification ${d} show`,setTimeout(()=>m.classList.remove("show"),4e3))},g=async c=>{P();try{if(await new Promise(d=>setTimeout(d,1500)),Math.random()>.2)k(`Каталог "${c}" успішно завантажено!`,"success");else throw new Error}catch{k("Виникла помилка при завантаженні. Спробуйте пізніше.")}finally{w()}};document.querySelectorAll("a, button").forEach(c=>{c.style.cursor="pointer"}),window.devicePixelRatio>1&&console.log("Retina display detected - loading high-res images");function _(c){document.querySelectorAll(c).forEach(d=>{d.addEventListener("mouseup",()=>d.blur()),d.addEventListener("mouseleave",()=>d.blur()),d.addEventListener("touchend",()=>d.blur(),{passive:!0})})}_(".nav-link, .mobile-nav-link, .burger, .close-menu, .cta-button, .mobile-cta-button"),window.loadFurniture=g});const oe=document.querySelectorAll(".furniture-item");oe.forEach(e=>{e.addEventListener("click",()=>{oe.forEach(t=>t.classList.remove("active")),e.classList.add("active")})});const se="https://furniture-store.b.goit.study/api",Z=document.getElementById("categoryList"),Q=document.getElementById("productsList"),S=document.getElementById("loadMoreBtn");let R="all",j=1,V=8,le=0,Y=!1;async function ce(e){const t=await fetch(e);if(!t.ok)throw new Error(`${t.status} ${t.statusText}`);return t.json()}const X={categories:()=>ce(`${se}/categories`),furnitures:(e={})=>{const t=new URLSearchParams({page:e.page??1,limit:e.limit??V});return e.category&&e.category!=="all"&&t.set("category",e.category),ce(`${se}/furnitures?${t.toString()}`)}};async function Le(){const e=await X.categories(),t=new Map(e.map(n=>[n.name.trim(),n._id]));Z.querySelectorAll(".furniture-item").forEach(n=>{var o;const s=(o=n.querySelector(".furniture-text"))==null?void 0:o.textContent.trim();n.dataset.cat=s==="Всі товари"?"all":t.get(s)||""})}function Se(){Q.innerHTML=""}function ue(e){window.__productsCache=window.__productsCache||new Map,e.forEach(n=>window.__productsCache.set(n._id,n));const t=e.map(n=>{const s=n.title||n.name||"Без назви",o=n.image||n.img||n.images&&n.images[0]||"",i=n.price!=null?`${n.price} грн`:"";return`<li class="product-card" data-id="${n._id}">
        ${o?`<img src="${o}" alt="${s}">`:""}
        <h3 class="gallery-title">${s}</h3>
        ${i?`<p class="gallery-text">${i}</p>`:""}
        <button class="details-btn" data-id="${n._id}" type="button">Детальніше</button>
      </li>`}).join("");Q.insertAdjacentHTML("beforeend",t)}function de(e){const t=Q.querySelectorAll(".product-card").length,n=e<V||t>=le;S.hidden=n,S.disabled=n}async function fe(){j=1;const e=await X.furnitures({page:j,limit:V,category:R});le=e.totalItems??e.total??e.furnitures.length,Se(),ue(e.furnitures),de(e.furnitures.length)}async function $e(){if(!Y){Y=!0,S.disabled=!0,j+=1;try{const e=await X.furnitures({page:j,limit:V,category:R});ue(e.furnitures),de(e.furnitures.length)}finally{Y=!1,S.hidden||(S.disabled=!1)}}}Z.addEventListener("click",async e=>{const t=e.target.closest(".furniture-item");if(!t)return;const n=t.dataset.cat||"all";n!==R&&(R=n,j=1,Z.querySelectorAll(".furniture-item").forEach(s=>s.classList.remove("active")),t.classList.add("active"),await fe())});S==null||S.addEventListener("click",$e);(async function(){await Le(),await fe()})();const qe=[{question:"Як здійснюється доставка меблів?",answer:"Ми доставляємо замовлення по всій Україні через надійні служби. Термін доставки зазвичай складає 3-7 днів залежно від регіону."},{question:"Чи є можливість вибрати колір або матеріал?",answer:"Так, у багатьох моделях доступні варіанти оббивки та кольорів. Усі доступні опції вказані на сторінці товару."},{question:"Чи можна повернути товар, якщо він не підійшов?",answer:"Так, ви можете повернути товар протягом 14 днів, якщо він не був у користуванні та збережений у первинному вигляді."},{question:"Чи надаєте ви послугу збирання меблів?",answer:"Так, під час оформлення замовлення можна обрати послугу збирання. Наші майстри зберуть меблі у зручний для вас час."},{question:"Як здійснити оплату?",answer:"Ми приймаємо оплату карткою онлайн, банківським переказом або післяплатою при отриманні."}],ke=document.getElementById("faq-list");qe.forEach(e=>{ke.innerHTML+=`
    <article class="ac">
      <h3 class="ac-header">
        <button type="button" class="ac-trigger">${e.question}</button>
      </h3>
      <div class="ac-panel">
        <p class="ac-text">${e.answer}</p>
      </div>
    </article>
  `});const _e=new ve(".accordion-container",{duration:500,showMultiple:!1});document.addEventListener("click",e=>{document.querySelector(".accordion-container").contains(e.target)||document.querySelectorAll(".accordion-container .ac.is-active").forEach((s,o)=>{const m=Array.from(document.querySelectorAll(".accordion-container .ac")).indexOf(s);m!==-1&&_e.close(m)})});const Ae="https://furniture-store.b.goit.study/api",Ce=e=>{const t=Number(e)||0,n=Math.round(t*2)/2;return Math.min(5,Math.max(0,n))},F="M9.5709 1.47649C9.91464 0.612003 11.0854 0.612004 11.4291 1.47649L13.4579 6.57884C13.6029 6.94328 13.9306 7.19229 14.3067 7.22384L19.5727 7.66545C20.4649 7.74027 20.8267 8.90496 20.1469 9.51407L16.1348 13.1091C15.8483 13.3659 15.723 13.7688 15.8106 14.1527L17.0364 19.528C17.244 20.4387 16.2969 21.1586 15.533 20.6706L11.0246 17.79C10.7025 17.5842 10.2975 17.5842 9.9755 17.79L5.467 20.6706C4.70312 21.1586 3.75596 20.4387 3.96364 19.528L5.18943 14.1527C5.27699 13.7688 5.15183 13.3659 4.86527 13.1091L0.853063 9.51407C0.173281 8.90496 0.535068 7.74027 1.42729 7.66545L6.69337 7.22384C7.06952 7.19229 7.39717 6.94328 7.54208 6.57884L9.5709 1.47649Z";function Me(e,{size:t=21,gap:n=4,fill:s="#080c09",empty:o="#ffffff",stroke:i="#080c09",strokeWidth:m=1.5}={}){const h=Math.floor(e),P=e-h>=.5,w=t*5+n*4,k="rate"+Math.random().toString(36).slice(2,9),g=[],_=[];for(let c=0;c<5;c++){const d=c*(t+n);if(c<h)g.push(`<path d="${F}" transform="translate(${d} 0)" fill="${s}"/>`);else if(c===h&&P){g.push(`<path d="${F}" transform="translate(${d} 0)" fill="${o}" stroke="${i}" stroke-width="${m}" stroke-linejoin="round"/>`);const A=`${k}-h${c}`;_.push(`<clipPath id="${A}"><rect x="0" y="0" width="${t/2}" height="${t}"/></clipPath>`),g.push(`<g transform="translate(${d} 0)" clip-path="url(#${A})"><path d="${F}" fill="${s}"/></g>`)}else g.push(`<path d="${F}" transform="translate(${d} 0)" fill="${o}" stroke="${i}" stroke-width="${m}" stroke-linejoin="round"/>`)}return`
    <svg class="rating-stars" width="${w}" height="${t}" viewBox="0 0 ${w} ${t}" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false">
      ${_.length?`<defs>${_.join("")}</defs>`:""}
      ${g.join("")}
    </svg>
  `}const xe=e=>{const t=e.name||"Анонім",n=e.descr||"",s=Ce(e.rate||0);return`
    <div class="swiper-slide">
      <article class="feedback-card">
        <div class="feedback-card__stars">
          ${Me(s)}
        </div>
        <p class="feedback-card__text">“${n}”</p>
        <p class="feedback-card__name">${t}</p>
      </article>
    </div>
  `};async function Ie(){const e=await fetch(`${Ae}/feedbacks`);if(!e.ok)throw new Error("Feedbacks fetch failed");const t=await e.json();return Array.isArray(t.feedbacks)?t.feedbacks.slice(0,10):[]}function ie(){return new be(".feedbacks-swiper",{modules:[we,Ee],speed:400,spaceBetween:24,slidesPerView:1,breakpoints:{768:{slidesPerView:2},1024:{slidesPerView:3}},navigation:{prevEl:"#fbPrev",nextEl:"#fbNext",disabledClass:"is-disabled"},pagination:{el:"#fbPagination",clickable:!0,dynamicBullets:!0,dynamicMainBullets:6}})}function ae(){document.querySelectorAll("#fbPrev, #fbNext").forEach(e=>{e.addEventListener("mouseup",()=>e.blur()),e.addEventListener("mouseleave",()=>e.blur()),e.addEventListener("touchend",()=>e.blur(),{passive:!0})})}async function Pe(){const e=document.querySelector("#feedbacksWrapper");if(e)try{const t=await Ie();e.innerHTML=t.map(xe).join(""),ie(),ae()}catch(t){console.error(t),e.innerHTML='<div class="swiper-slide"><p>Сталася помилка</p></div>',ie(),ae()}}const me=new MutationObserver(()=>{document.querySelector("#feedbacksWrapper")&&(me.disconnect(),Pe())});me.observe(document.body,{childList:!0,subtree:!0});document.addEventListener("DOMContentLoaded",()=>{console.log("Footer script initialized"),document.querySelectorAll(".nav-footer a").forEach(t=>{t.addEventListener("click",function(n){n.preventDefault();const s=this.getAttribute("href"),o=document.querySelector(s);o?o.scrollIntoView({behavior:"smooth"}):console.warn(`Элемент с id="${s}" не найден на странице.`)})});const e=document.querySelector(".copyright");if(e){const t=new Date().getFullYear();e.innerHTML=`&copy; ${t} Relume. Всі права захищені`}});(function(){const e=document.getElementById("furnitureModal"),t=e.querySelector(".furn-modal__main-img"),n=e.querySelector(".furn-modal__thumbs"),s=e.querySelector(".furn-modal__title"),o=e.querySelector(".furn-modal__category"),i=e.querySelector(".furn-modal__price"),m=e.querySelector(".furn-modal__rating"),h=e.querySelector(".furn-modal__colors"),P=e.querySelector(".furn-modal__desc"),w=e.querySelector(".furn-modal__sizes"),k=e.querySelector(".furn-modal__order");let g=null;const c=((r,a=document)=>a.querySelector(r))("#productsList"),d=(r,a,$)=>Math.max(a,Math.min($,r));function A(r){return r?typeof r=="string"?r:typeof r=="object"?r.name??r.title??r.label??Object.values(r).find(a=>typeof a=="string")??"":"":""}function T(r){const a=r.rating;return typeof a=="number"?a:a&&typeof a=="object"?a.value??a.rate??a.score??a.stars??0:typeof r.stars=="number"?r.stars:typeof r.score=="number"?r.score:typeof r.popularity=="number"?Math.min(5,r.popularity):4.8}function he(r){const a=Array.isArray(r.colors||r.colours)?r.colors||r.colours:[],$=p=>typeof p=="string"?p:p&&(p.hex??p.color??p.value??p.name)||null,E=a.map($).filter(Boolean);return E.length?E:["#111","#c0c0c0","#f5f5f5"]}function ge(){e.hidden=!1,document.body.classList.add("no-scroll"),e.querySelector("[data-close]").focus({preventScroll:!0}),window.addEventListener("keydown",te)}function z(){e.hidden=!0,document.body.classList.remove("no-scroll"),window.removeEventListener("keydown",te)}function te(r){r.key==="Escape"&&z()}e.addEventListener("click",r=>{(r.target===e||r.target.closest("[data-close]"))&&z()});function pe(){const r=h.querySelector('input[name="color"]:checked');return r?r.value:null}k.addEventListener("click",()=>{const r={productId:g==null?void 0:g._id,title:s.textContent,color:pe()};z(),document.dispatchEvent(new CustomEvent("open-order-modal",{detail:r})),typeof window.openOrderModal=="function"&&window.openOrderModal(r)});function ne(r){var re;g=r;const a=r.title||r.name||"Модель",$=A(r.category),E=r.price,p=d(Number(T(r))||0,0,5),B=(re=r.images)!=null&&re.length?r.images:r.image?[r.image]:[],H=r.description||"",N=he(r),L=r.size||r.sizes||r.dimensions||{};s.textContent=a,o.textContent=$,i.textContent=E!=null?`${E} грн`:"",m.style.setProperty("--value",p);const O=B.length?B:[""];t.src=O[0]||"",t.alt=a;const D=O.slice(1,3);n.innerHTML=D.map((y,v)=>`<li>
         <button type="button" aria-label="Зображення ${v+2}">
           <img src="${y}" alt="${a}">
         </button>
       </li>`).join(""),n.onclick=y=>{const v=y.target.closest("button");if(!v)return;const b=v.querySelector("img");b&&(t.src=b.src,n.querySelectorAll("img").forEach(q=>q.removeAttribute("aria-current")),b.setAttribute("aria-current","true"))},h.innerHTML="",N.forEach((y,v)=>{const b=document.createElement("label");b.className="furn-color",b.style.background=y,b.title=typeof y=="string"?y:"Колір";const q=document.createElement("input");q.type="checkbox",q.name="color",q.value=y,v===0&&(q.checked=!0),b.appendChild(q),h.appendChild(b)}),h.onchange=y=>{y.target.name==="color"&&[...h.querySelectorAll('input[name="color"]')].forEach(v=>{v!==y.target&&(v.checked=!1)})},P.textContent=H,w.innerHTML="";const u=typeof L=="object"&&L?L:{},C=u.width||u.w||u.W,M=u.height||u.h||u.H,x=u.depth||u.length||u.d||u.L;if(C&&M&&x)w.innerHTML=`<li>Розміри: ${C} x ${M} x ${x}</li>`;else{const y=[];C&&y.push(`Ширина: ${C}`),M&&y.push(`Висота: ${M}`),x&&y.push(`Глибина: ${x}`);const v=typeof L=="string"?[L]:[];w.innerHTML=[...y,...v].map(b=>`<li>${b}</li>`).join("")}}c==null||c.addEventListener("click",r=>{var B,H,N,L,O,D;const a=r.target.closest(".details-btn");if(!a)return;const $=a.dataset.id||((B=a.closest(".product-card"))==null?void 0:B.dataset.id),E=window.__productsCache instanceof Map?window.__productsCache:null,p=E==null?void 0:E.get($);if(p)ne(p);else{const u=a.closest(".product-card"),C=(N=(H=u==null?void 0:u.querySelector(".gallery-title"))==null?void 0:H.textContent)==null?void 0:N.trim(),M=(L=u==null?void 0:u.querySelector("img"))==null?void 0:L.src,x=(D=(O=u==null?void 0:u.querySelector(".gallery-text"))==null?void 0:O.textContent)==null?void 0:D.trim();ne({title:C,images:[M],price:x})}ge()})})();const l=document.getElementById("modal"),I=document.querySelector(".open-modal-btn"),G=l==null?void 0:l.querySelector(".modal__close"),J=l==null?void 0:l.querySelector(".modal__overlay"),K=l==null?void 0:l.querySelector(".modal__content"),f=l==null?void 0:l.querySelector("form");function ee(e){var t,n;l&&(l.classList.add("active"),l.setAttribute("aria-hidden","false"),document.body.classList.add("no-scroll"),e&&((t=l.querySelector('[name="product"]'))==null||t.setAttribute("value",e.title||""),(n=l.querySelector('[name="color"]'))==null||n.setAttribute("value",e.color||"")),K==null||K.focus({preventScroll:!0}))}function W(){l&&(l.classList.remove("active"),l.setAttribute("aria-hidden","true"),document.body.classList.remove("no-scroll"),I==null||I.focus({preventScroll:!0}))}I==null||I.addEventListener("click",()=>ee());document.addEventListener("open-order-modal",e=>ee(e.detail));G==null||G.addEventListener("click",W);J==null||J.addEventListener("click",W);document.addEventListener("keydown",e=>{e.key==="Escape"&&(l!=null&&l.classList.contains("active"))&&W()});window.openOrderModal=e=>ee(e);window.closeOrderModal=W;function Te(){f==null||f.querySelectorAll(".input-error").forEach(e=>e.remove()),f==null||f.querySelectorAll('[aria-invalid="true"]').forEach(e=>e.removeAttribute("aria-invalid")),ye("")}function U(e,t){e.setAttribute("aria-invalid","true");const n=document.createElement("div");n.className="input-error",n.textContent=t,n.style.cssText="margin-top:6px;color:#b00020;font:600 12px/1.2 Raleway, sans-serif;",e.insertAdjacentElement("afterend",n)}function ye(e,t="info"){if(!f)return;let n=f.querySelector(".form-status");if(!n){n=document.createElement("div"),n.className="form-status";const o=f.querySelector('[type="submit"]');(o?o.parentElement:f).appendChild(n)}n.textContent=e||"";const s=t==="error"?"#b00020":t==="success"?"#0e7a0d":"#6c6f73";n.style.cssText=e?"margin-top:12px;font:600 13px/1.3 Raleway, sans-serif;":"display:none;",e&&(n.style.display="block",n.style.color=s)}function Be(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.trim())}function Oe(e){const t=e.replace(/\D/g,"");return t.length>=10&&t.length<=15}function je(e,t){return e.trim().length>=t}f==null||f.addEventListener("submit",async e=>{var i;Te();let t=!0;const n=f.querySelector('[name="name"]'),s=f.querySelector('[name="email"]'),o=f.querySelector('[name="phone"]');if(n&&!je(n.value,2)&&(t=!1,U(n,"Вкажіть ім’я (мінімум 2 символи).")),s&&!Be(s.value)&&(t=!1,U(s,"Некоректний email.")),o&&!Oe(o.value)&&(t=!1,U(o,"Некоректний телефон.")),!t){e.preventDefault(),ye("Будь ласка, виправте помилки у формі.","error"),(i=f.querySelector('[aria-invalid="true"]')||n||s||o)==null||i.focus();return}e.preventDefault()});
//# sourceMappingURL=index.js.map
