import{A as N,r as T,S as F,N as D,P as H}from"./assets/vendor-oX30Jbj5.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const c of r)if(c.type==="childList")for(const s of c.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function n(r){const c={};return r.integrity&&(c.integrity=r.integrity),r.referrerPolicy&&(c.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?c.credentials="include":r.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function o(r){if(r.ep)return;r.ep=!0;const c=n(r);fetch(r.href,c)}})();document.addEventListener("DOMContentLoaded",()=>{console.log("Header script initialized");const e=document.getElementById("burger"),t=document.getElementById("mobileMenu"),n=document.getElementById("closeMenu"),o=document.getElementById("logo"),r=document.body,c=document.getElementById("loader"),s=document.getElementById("notification"),l=(a=!0)=>{e.classList.toggle("active",a),t.classList.toggle("active",a),r.classList.toggle("menu-open",a)};e==null||e.addEventListener("click",()=>l(!0)),n==null||n.addEventListener("click",()=>l(!1)),t==null||t.addEventListener("click",a=>{a.target===t&&l(!1)}),document.addEventListener("keydown",a=>{a.key==="Escape"&&(t!=null&&t.classList.contains("active"))&&l(!1)}),document.querySelectorAll(".mobile-nav-link, .mobile-cta-button").forEach(a=>{a.addEventListener("click",()=>l(!1))}),document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",d=>{d.preventDefault();const C=a.getAttribute("href").substring(1),y=document.getElementById(C);y==null||y.scrollIntoView({behavior:"smooth",block:"start"})})}),o==null||o.addEventListener("click",a=>{a.preventDefault(),window.scrollTo({top:0,behavior:"smooth"})});const _=()=>c&&(c.style.display="flex"),E=()=>c&&(c.style.display="none");E();const L=(a,d="error")=>{s&&(s.textContent=a,s.className=`notification ${d} show`,setTimeout(()=>s.classList.remove("show"),4e3))},O=async a=>{_();try{if(await new Promise(d=>setTimeout(d,1500)),Math.random()>.2)L(`Каталог "${a}" успішно завантажено!`,"success");else throw new Error}catch{L("Виникла помилка при завантаженні. Спробуйте пізніше.")}finally{E()}};document.querySelectorAll("a, button").forEach(a=>{a.style.cursor="pointer"}),window.devicePixelRatio>1&&console.log("Retina display detected - loading high-res images"),window.loadFurniture=O});const k=document.querySelectorAll(".furniture-item");k.forEach(e=>{e.addEventListener("click",()=>{k.forEach(t=>t.classList.remove("active")),e.classList.add("active")})});const q="https://furniture-store.b.goit.study/api",h=document.getElementById("categoryList"),v=document.getElementById("productsList"),i=document.getElementById("loadMoreBtn");let m="all",u=1,g=8,A=0,p=!1;async function S(e){const t=await fetch(e);if(!t.ok)throw new Error(`${t.status} ${t.statusText}`);return t.json()}const w={categories:()=>S(`${q}/categories`),furnitures:(e={})=>{const t=new URLSearchParams({page:e.page??1,limit:e.limit??g});return e.category&&e.category!=="all"&&t.set("category",e.category),S(`${q}/furnitures?${t.toString()}`)}};async function j(){const e=await w.categories(),t=new Map(e.map(n=>[n.name.trim(),n._id]));h.querySelectorAll(".furniture-item").forEach(n=>{var r;const o=(r=n.querySelector(".furniture-text"))==null?void 0:r.textContent.trim();n.dataset.cat=o==="Всі товари"?"all":t.get(o)||""})}function R(){v.innerHTML=""}function $(e){const t=e.map(n=>{var s;const o=n.title||n.name||"Без назви",r=n.image||n.img||((s=n.images)==null?void 0:s[0])||"",c=n.price!=null?`${n.price} грн`:"";return`<li class="product-card">
      ${r?`<img src="${r}" alt="${o}">`:""}
      <h3 class="gallery-title">${o}</h3>${c?`<p class="gallery-text">${c}</p>`:""}
      <button class="details-btn">Детальніше</button>
    </li>`}).join("");v.insertAdjacentHTML("beforeend",t)}function M(e){const t=v.querySelector(".product-card").length,n=e<g||t>=A;i.hidden=n,i.disabled=n}async function B(){u=1;const e=await w.furnitures({page:u,limit:g,category:m});A=e.totalItems??e.total??e.furnitures.length,R(),$(e.furnitures),M(e.furnitures.length)}async function V(){if(p)return;p=!0,i.disabled=!0,u+=1;const e=await w.furnitures({page:u,limit:g,category:m});$(e.furnitures),M(e.furnitures.length),p=!1,i.hidden||(i.disabled=!1)}h.addEventListener("click",async e=>{const t=e.target.closest(".furniture-item");if(!t)return;const n=t.dataset.cat||"all";n!==m&&(m=n,u=1,h.querySelectorAll(".furniture-item").forEach(o=>o.classList.remove("active")),t.classList.add("active"),await B())});i.addEventListener("click",V);(async function(){await j(),await B()})();const z=[{question:"Як здійснюється доставка меблів?",answer:"Ми доставляємо замовлення по всій Україні через надійні служби. Термін доставки зазвичай складає 3-7 днів залежно від регіону."},{question:"Чи є можливість вибрати колір або матеріал?",answer:"Так, у багатьох моделях доступні варіанти оббивки та кольорів. Усі доступні опції вказані на сторінці товару."},{question:"Чи можна повернути товар, якщо він не підійшов?",answer:"Так, ви можете повернути товар протягом 14 днів, якщо він не був у користуванні та збережений у первинному вигляді."},{question:"Чи надаєте ви послугу збирання меблів?",answer:"Так, під час оформлення замовлення можна обрати послугу збирання. Наші майстри зберуть меблі у зручний для вас час."},{question:"Як здійснити оплату?",answer:"Ми приймаємо оплату карткою онлайн, банківським переказом або післяплатою при отриманні."}],J=document.getElementById("faq-list");z.forEach(e=>{J.innerHTML+=`
    <article class="ac">
      <h3 class="ac-header">
        <button type="button" class="ac-trigger">${e.question}</button>
      </h3>
      <div class="ac-panel">
        <p class="ac-text">${e.answer}</p>
      </div>
    </article>
  `});const W=new N(".accordion-container",{duration:500,showMultiple:!1});document.addEventListener("click",e=>{document.querySelector(".accordion-container").contains(e.target)||document.querySelectorAll(".accordion-container .ac.is-active").forEach((o,r)=>{const s=Array.from(document.querySelectorAll(".accordion-container .ac")).indexOf(o);s!==-1&&W.close(s)})});const Y="https://furniture-store.b.goit.study/api",K=e=>{const t=Number(e)||0;return t>=3.3&&t<=3.7?3.5:t>=3.8&&t<=4.2?4:Math.round(t*2)/2},U=e=>{const t=e.name||"Анонім",n=e.descr||"";return`
    <div class="swiper-slide">
      <article class="feedback-card">
        <div class="feedback-card__stars">
          <div class="rating" data-rating="${K(e.rate||0)}"></div>
        </div>
        <p class="feedback-card__text">“${n}”</p>
        <p class="feedback-card__name">${t}</p>
      </article>
    </div>
  `};async function G(){const e=await fetch(`${Y}/feedbacks`);if(!e.ok)throw new Error("Feedbacks fetch failed");const t=await e.json();return Array.isArray(t.feedbacks)?t.feedbacks.slice(0,10):[]}function Q(e){e.querySelectorAll(".rating").forEach(t=>{const n=Number(t.dataset.rating)||0;T({element:t,readOnly:!0,rating:n,step:.5,max:5,starSize:21})})}function I(){return new F(".feedbacks-swiper",{modules:[D,H],speed:400,spaceBetween:24,slidesPerView:1,breakpoints:{768:{slidesPerView:2},1024:{slidesPerView:3}},navigation:{prevEl:"#fbPrev",nextEl:"#fbNext",disabledClass:"is-disabled"},pagination:{el:"#fbPagination",clickable:!0,dynamicBullets:!0,dynamicMainBullets:6}})}async function X(){const e=document.querySelector("#feedbacksWrapper");if(e)try{const t=await G();e.innerHTML=t.map(U).join(""),Q(document),I()}catch(t){console.error(t),e.innerHTML='<div class="swiper-slide"><p>Сталася помилка</p></div>',I()}}const P=new MutationObserver(()=>{document.querySelector("#feedbacksWrapper")&&(P.disconnect(),X())});P.observe(document.body,{childList:!0,subtree:!0});document.addEventListener("DOMContentLoaded",()=>{console.log("Footer script initialized"),document.querySelectorAll(".nav-footer a").forEach(t=>{t.addEventListener("click",function(n){n.preventDefault();const o=this.getAttribute("href"),r=document.querySelector(o);r?r.scrollIntoView({behavior:"smooth"}):console.warn(`Элемент с id="${o}" не найден на странице.`)})});const e=document.querySelector(".copyright");if(e){const t=new Date().getFullYear();e.innerHTML=`&copy; ${t} Relume. Всі права захищені`}});const f=document.getElementById("modal"),x=document.querySelector(".open-modal-btn"),Z=document.querySelector(".modal__close"),ee=document.querySelector(".modal__overlay"),te=document.querySelector(".modal__content");x.addEventListener("click",()=>{f.classList.add("active"),f.setAttribute("aria-hidden","false"),te.focus()});Z.addEventListener("click",b);ee.addEventListener("click",b);document.addEventListener("keydown",e=>{e.key==="Escape"&&f.classList.contains("active")&&b()});function b(){f.classList.remove("active"),f.setAttribute("aria-hidden","true"),x.focus()}
//# sourceMappingURL=index.js.map
