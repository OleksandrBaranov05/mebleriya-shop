import{A as C,r as T,S as F,N as H,P as j}from"./assets/vendor-oX30Jbj5.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}})();document.addEventListener("DOMContentLoaded",()=>{console.log("Header script initialized");const e=document.getElementById("burger"),t=document.getElementById("mobileMenu"),n=document.getElementById("closeMenu"),s=document.getElementById("logo"),r=document.body,a=document.getElementById("loader"),c=document.getElementById("notification"),l=(o=!0)=>{e.classList.toggle("active",o),t.classList.toggle("active",o),r.classList.toggle("menu-open",o)};e==null||e.addEventListener("click",()=>l(!0)),n==null||n.addEventListener("click",()=>l(!1)),t==null||t.addEventListener("click",o=>{o.target===t&&l(!1)}),document.addEventListener("keydown",o=>{o.key==="Escape"&&(t!=null&&t.classList.contains("active"))&&l(!1)}),document.querySelectorAll(".mobile-nav-link, .mobile-cta-button").forEach(o=>{o.addEventListener("click",()=>l(!1))}),document.querySelectorAll('a[href^="#"]').forEach(o=>{o.addEventListener("click",d=>{d.preventDefault();const O=o.getAttribute("href").substring(1),y=document.getElementById(O);y==null||y.scrollIntoView({behavior:"smooth",block:"start"})})}),s==null||s.addEventListener("click",o=>{o.preventDefault(),window.scrollTo({top:0,behavior:"smooth"})});const _=()=>a&&(a.style.display="flex"),E=()=>a&&(a.style.display="none");E();const L=(o,d="error")=>{c&&(c.textContent=o,c.className=`notification ${d} show`,setTimeout(()=>c.classList.remove("show"),4e3))},N=async o=>{_();try{if(await new Promise(d=>setTimeout(d,1500)),Math.random()>.2)L(`Каталог "${o}" успішно завантажено!`,"success");else throw new Error}catch{L("Виникла помилка при завантаженні. Спробуйте пізніше.")}finally{E()}};document.querySelectorAll("a, button").forEach(o=>{o.style.cursor="pointer"}),window.devicePixelRatio>1&&console.log("Retina display detected - loading high-res images"),window.loadFurniture=N});const k=document.querySelectorAll(".furniture-item");k.forEach(e=>{e.addEventListener("click",()=>{k.forEach(t=>t.classList.remove("active")),e.classList.add("active")})});const q="https://furniture-store.b.goit.study/api",v=document.getElementById("categoryList"),h=document.getElementById("productsList"),i=document.getElementById("loadMoreBtn");let m="all",u=1,g=8,A=0,p=!1;async function S(e){const t=await fetch(e);if(!t.ok)throw new Error(`${t.status} ${t.statusText}`);return t.json()}const b={categories:()=>S(`${q}/categories`),furnitures:(e={})=>{const t=new URLSearchParams({page:e.page??1,limit:e.limit??g});return e.category&&e.category!=="all"&&t.set("category",e.category),S(`${q}/furnitures?${t.toString()}`)}};async function D(){const e=await b.categories(),t=new Map(e.map(n=>[n.name.trim(),n._id]));v.querySelectorAll(".furniture-item").forEach(n=>{var r;const s=(r=n.querySelector(".furniture-text"))==null?void 0:r.textContent.trim();n.dataset.cat=s==="Всі товари"?"all":t.get(s)||""})}function R(){h.innerHTML=""}function $(e){const t=e.map(n=>{var c;const s=n.title||n.name||"Без назви",r=n.image||n.img||((c=n.images)==null?void 0:c[0])||"",a=n.price!=null?`${n.price} грн`:"";return`<li class="product-card">
      ${r?`<img src="${r}" alt="${s}">`:""}
      <h3 class="gallery-title">${s}</h3>${a?`<p class="gallery-text">${a}</p>`:""}
      <button class="details-btn">Детальніше</button>
    </li>`}).join("");h.insertAdjacentHTML("beforeend",t)}function B(e){const t=h.querySelector(".product-card").length,n=e<g||t>=A;i.hidden=n,i.disabled=n}async function M(){u=1;const e=await b.furnitures({page:u,limit:g,category:m});A=e.totalItems??e.total??e.furnitures.length,R(),$(e.furnitures),B(e.furnitures.length)}async function V(){if(p)return;p=!0,i.disabled=!0,u+=1;const e=await b.furnitures({page:u,limit:g,category:m});$(e.furnitures),B(e.furnitures.length),p=!1,i.hidden||(i.disabled=!1)}v.addEventListener("click",async e=>{const t=e.target.closest(".furniture-item");if(!t)return;const n=t.dataset.cat||"all";n!==m&&(m=n,u=1,v.querySelectorAll(".furniture-item").forEach(s=>s.classList.remove("active")),t.classList.add("active"),await M())});i.addEventListener("click",V);(async function(){await D(),await M()})();const z=[{question:"Як здійснюється доставка меблів?",answer:"Ми доставляємо замовлення по всій Україні через надійні служби. Термін доставки зазвичай складає 3-7 днів залежно від регіону."},{question:"Чи є можливість вибрати колір або матеріал?",answer:"Так, у багатьох моделях доступні варіанти оббивки та кольорів. Усі доступні опції вказані на сторінці товару."},{question:"Чи можна повернути товар, якщо він не підійшов?",answer:"Так, ви можете повернути товар протягом 14 днів, якщо він не був у користуванні та збережений у первинному вигляді."},{question:"Чи надаєте ви послугу збирання меблів?",answer:"Так, під час оформлення замовлення можна обрати послугу збирання. Наші майстри зберуть меблі у зручний для вас час."},{question:"Як здійснити оплату?",answer:"Ми приймаємо оплату карткою онлайн, банківським переказом або післяплатою при отриманні."}],J=document.getElementById("faq-list");z.forEach(e=>{J.innerHTML+=`
    <article class="ac">
      <h3 class="ac-header">
        <button type="button" class="ac-trigger">${e.question}</button>
      </h3>
      <div class="ac-panel">
        <p class="ac-text">${e.answer}</p>
      </div>
    </article>
  `});const W=new C(".accordion-container",{duration:500,showMultiple:!1});document.addEventListener("click",e=>{document.querySelector(".accordion-container").contains(e.target)||document.querySelectorAll(".accordion-container .ac.is-active").forEach((s,r)=>{const c=Array.from(document.querySelectorAll(".accordion-container .ac")).indexOf(s);c!==-1&&W.close(c)})});const K="https://furniture-store.b.goit.study/api",U=e=>{const t=Number(e)||0;return t>=3.3&&t<=3.7?3.5:t>=3.8&&t<=4.2?4:Math.round(t*2)/2},G=e=>{const t=e.name||"Анонім",n=e.descr||"";return`
    <div class="swiper-slide">
      <article class="feedback-card">
        <div class="feedback-card__stars">
          <div class="rating" data-rating="${U(e.rate||0)}"></div>
        </div>
        <p class="feedback-card__text">“${n}”</p>
        <p class="feedback-card__name">${t}</p>
      </article>
    </div>
  `};async function Q(){const e=await fetch(`${K}/feedbacks`);if(!e.ok)throw new Error("Feedbacks fetch failed");const t=await e.json();return Array.isArray(t.feedbacks)?t.feedbacks.slice(0,10):[]}function X(e){e.querySelectorAll(".rating").forEach(t=>{const n=Number(t.dataset.rating)||0;T({element:t,readOnly:!0,rating:n,step:.5,max:5,starSize:21})})}function I(){return new F(".feedbacks-swiper",{modules:[H,j],speed:400,spaceBetween:24,slidesPerView:1,breakpoints:{768:{slidesPerView:2},1024:{slidesPerView:3}},navigation:{prevEl:"#fbPrev",nextEl:"#fbNext",disabledClass:"is-disabled"},pagination:{el:"#fbPagination",clickable:!0,dynamicBullets:!0,dynamicMainBullets:6}})}async function Y(){const e=document.querySelector("#feedbacksWrapper");if(e)try{const t=await Q();e.innerHTML=t.map(G).join(""),X(document),I()}catch(t){console.error(t),e.innerHTML='<div class="swiper-slide"><p>Сталася помилка</p></div>',I()}}const P=new MutationObserver(()=>{document.querySelector("#feedbacksWrapper")&&(P.disconnect(),Y())});P.observe(document.body,{childList:!0,subtree:!0});const f=document.getElementById("modal"),x=document.querySelector(".open-modal-btn"),Z=document.querySelector(".modal__close"),ee=document.querySelector(".modal__overlay"),te=document.querySelector(".modal__content");x.addEventListener("click",()=>{f.classList.add("active"),f.setAttribute("aria-hidden","false"),te.focus()});Z.addEventListener("click",w);ee.addEventListener("click",w);document.addEventListener("keydown",e=>{e.key==="Escape"&&f.classList.contains("active")&&w()});function w(){f.classList.remove("active"),f.setAttribute("aria-hidden","true"),x.focus()}
//# sourceMappingURL=index.js.map
