import{A as $e,S as ke,N as qe,P as Ce,i as Me}from"./assets/vendor-Dmwv0MB_.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const m of i.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&s(m)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();document.addEventListener("DOMContentLoaded",()=>{console.log("Header script initialized");const e=document.getElementById("burger"),t=document.getElementById("mobileMenu"),n=document.getElementById("closeMenu"),s=document.getElementById("logo"),r=document.body,i=document.getElementById("loader"),m=document.getElementById("notification");let d=[];const b=()=>i&&(i.style.display="flex"),p=()=>i&&(i.style.display="none");p();const S=(c,g="error")=>{m&&(m.textContent=c,m.className=`notification ${g} show`,setTimeout(()=>m.classList.remove("show"),4e3))},y=async c=>{b();try{if(await new Promise(g=>setTimeout(g,1500)),Math.random()>.2)S(`Каталог "${c}" успішно завантажено!`,"success");else throw new Error}catch{S("Виникла помилка при завантаженні. Спробуйте пізніше.")}finally{p()}};document.querySelectorAll("a, button").forEach(c=>{c.style.cursor="pointer"}),window.devicePixelRatio>1&&console.log("Retina display detected - loading high-res images");function T(c){document.querySelectorAll(c).forEach(g=>{g.addEventListener("mouseup",()=>g.blur()),g.addEventListener("mouseleave",()=>g.blur()),g.addEventListener("touchend",()=>g.blur(),{passive:!0})})}T(".nav-link, .mobile-nav-link, .burger, .close-menu, .cta-button, .mobile-cta-button"),document.querySelectorAll('a[href^="#"]').forEach(c=>{c.addEventListener("click",g=>{g.preventDefault();const X=c.getAttribute("href").substring(1),P=document.getElementById(X);P==null||P.scrollIntoView({behavior:"smooth",block:"start"})})}),s==null||s.addEventListener("click",c=>{c.preventDefault(),window.scrollTo({top:0,behavior:"smooth"})});const v=c=>{c.target===t&&_(!1)},$=c=>{c.key==="Escape"&&_(!1)},M=()=>_(!1);function Z(){t&&(t.addEventListener("click",v),document.addEventListener("keydown",$),d=Array.from(document.querySelectorAll(".mobile-nav-link, .mobile-cta-button")),d.forEach(c=>c.addEventListener("click",M)))}function Q(){t&&(t.removeEventListener("click",v),document.removeEventListener("keydown",$),d.length&&(d.forEach(c=>c.removeEventListener("click",M)),d=[]))}function _(c=!0){e==null||e.classList.toggle("active",c),t==null||t.classList.toggle("active",c),r.classList.toggle("menu-open",c),c?Z():Q()}e==null||e.addEventListener("click",()=>_(!0)),n==null||n.addEventListener("click",()=>_(!1)),window.loadFurniture=y});document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelectorAll(".furniture-item");function t(){let n=document.querySelector('.furniture-item[data-cat="all"]')||document.querySelector(".furniture-item-all")||Array.from(e).find(s=>{var r;return((r=s.querySelector(".furniture-text"))==null?void 0:r.textContent.trim())==="Всі товари"})||e[0];n&&(e.forEach(s=>s.classList.remove("active")),n.classList.add("active"))}e.forEach(n=>{n.addEventListener("click",()=>{e.forEach(s=>s.classList.remove("active")),n.classList.add("active")})}),t()});const de="https://furniture-store.b.goit.study/api",re=document.getElementById("categoryList"),ce=document.getElementById("productsList"),C=document.getElementById("loadMoreBtn");let G="all",R=1,U=8,he=0,ee=!1;async function fe(e){const t=await fetch(e);if(!t.ok)throw new Error(`${t.status} ${t.statusText}`);return t.json()}const ae={categories:()=>fe(`${de}/categories`),furnitures:(e={})=>{const t=new URLSearchParams({page:e.page??1,limit:e.limit??U});return e.category&&e.category!=="all"&&t.set("category",e.category),fe(`${de}/furnitures?${t.toString()}`)}};function _e(e){const t=Array.isArray((e==null?void 0:e.colors)||(e==null?void 0:e.colours))?e.colors||e.colours:[],n=i=>typeof i=="string"?i:i&&(i.hex??i.color??i.value??i.name)||null,s=t.map(n).filter(Boolean);return(s.length?s:["#111111","#c0c0c0","#f5f5f5"]).slice(0,3)}async function Ae(){const e=await ae.categories(),t=new Map(e.map(n=>[n.name.trim(),n._id]));re.querySelectorAll(".furniture-item").forEach(n=>{var r;const s=(r=n.querySelector(".furniture-text"))==null?void 0:r.textContent.trim();n.dataset.cat=s==="Всі товари"?"all":t.get(s)||""})}function xe(){ce.innerHTML=""}function ge(e){window.__productsCache=window.__productsCache||new Map,e.forEach(n=>window.__productsCache.set(n._id,n));const t=e.map(n=>{const s=n.title||n.name||"Без назви",r=n.image||n.img||n.images&&n.images[0]||"",i=n.price!=null?`${n.price} грн`:"",d=`
      <ul class="card-colors">
        ${_e(n).slice(0,3).map(b=>`<li class="card-color" title="${typeof b=="string"?b:"Колір"}" style="background:${b}"></li>`).join("")}
      </ul>
    `;return`<li class="product-card" data-id="${n._id}">
      ${r?`<img src="${r}" alt="${s}">`:""}
      <h3 class="gallery-title">${s}</h3>
      ${d}
      ${i?`<p class="gallery-text">${i}</p>`:""}
      <button class="details-btn" data-id="${n._id}" type="button">Детальніше</button>
    </li>`}).join("");ce.insertAdjacentHTML("beforeend",t)}function pe(e){const t=ce.querySelectorAll(".product-card").length,n=e<U||t>=he;C.hidden=n,C.disabled=n}async function ve(){R=1;const e=await ae.furnitures({page:R,limit:U,category:G});he=e.totalItems??e.total??e.furnitures.length,xe(),ge(e.furnitures),pe(e.furnitures.length)}async function Ie(){if(!ee){ee=!0,C.disabled=!0,R+=1;try{const e=await ae.furnitures({page:R,limit:U,category:G});ge(e.furnitures),pe(e.furnitures.length)}finally{ee=!1,C.hidden||(C.disabled=!1)}}}re.addEventListener("click",async e=>{const t=e.target.closest(".furniture-item");if(!t)return;const n=t.dataset.cat||"all";n!==G&&(G=n,R=1,re.querySelectorAll(".furniture-item").forEach(s=>s.classList.remove("active")),t.classList.add("active"),await ve())});C==null||C.addEventListener("click",Ie);(async function(){await Ae(),await ve()})();const Te=[{question:"Як здійснюється доставка меблів?",answer:"Ми доставляємо замовлення по всій Україні через надійні служби. Термін доставки зазвичай складає 3-7 днів залежно від регіону."},{question:"Чи є можливість вибрати колір або матеріал?",answer:"Так, у багатьох моделях доступні варіанти оббивки та кольорів. Усі доступні опції вказані на сторінці товару."},{question:"Чи можна повернути товар, якщо він не підійшов?",answer:"Так, ви можете повернути товар протягом 14 днів, якщо він не був у користуванні та збережений у первинному вигляді."},{question:"Чи надаєте ви послугу збирання меблів?",answer:"Так, під час оформлення замовлення можна обрати послугу збирання. Наші майстри зберуть меблі у зручний для вас час."},{question:"Як здійснити оплату?",answer:"Ми приймаємо оплату карткою онлайн, банківським переказом або післяплатою при отриманні."}],Pe=document.getElementById("faq-list");Te.forEach(e=>{Pe.innerHTML+=`
    <article class="ac">
      <h3 class="ac-header">
        <button type="button" class="ac-trigger">${e.question}</button>
      </h3>
      <div class="ac-panel">
        <p class="ac-text">${e.answer}</p>
      </div>
    </article>
  `});const Oe=new $e(".accordion-container",{duration:500,showMultiple:!1});document.addEventListener("click",e=>{document.querySelector(".accordion-container").contains(e.target)||document.querySelectorAll(".accordion-container .ac.is-active").forEach((s,r)=>{const m=Array.from(document.querySelectorAll(".accordion-container .ac")).indexOf(s);m!==-1&&Oe.close(m)})});const je="https://furniture-store.b.goit.study/api",Be=e=>{const t=Number(e)||0,n=Math.round(t*2)/2;return Math.min(5,Math.max(0,n))},Y="M9.5709 1.47649C9.91464 0.612003 11.0854 0.612004 11.4291 1.47649L13.4579 6.57884C13.6029 6.94328 13.9306 7.19229 14.3067 7.22384L19.5727 7.66545C20.4649 7.74027 20.8267 8.90496 20.1469 9.51407L16.1348 13.1091C15.8483 13.3659 15.723 13.7688 15.8106 14.1527L17.0364 19.528C17.244 20.4387 16.2969 21.1586 15.533 20.6706L11.0246 17.79C10.7025 17.5842 10.2975 17.5842 9.9755 17.79L5.467 20.6706C4.70312 21.1586 3.75596 20.4387 3.96364 19.528L5.18943 14.1527C5.27699 13.7688 5.15183 13.3659 4.86527 13.1091L0.853063 9.51407C0.173281 8.90496 0.535068 7.74027 1.42729 7.66545L6.69337 7.22384C7.06952 7.19229 7.39717 6.94328 7.54208 6.57884L9.5709 1.47649Z";function He(e,{size:t=21,gap:n=4,fill:s="#080c09",empty:r="#ffffff",stroke:i="#080c09",strokeWidth:m=1.5}={}){const d=Math.floor(e),b=e-d>=.5,p=t*5+n*4,S="rate"+Math.random().toString(36).slice(2,9),y=[],T=[];for(let v=0;v<5;v++){const $=v*(t+n);if(v<d)y.push(`<path d="${Y}" transform="translate(${$} 0)" fill="${s}"/>`);else if(v===d&&b){y.push(`<path d="${Y}" transform="translate(${$} 0)" fill="${r}" stroke="${i}" stroke-width="${m}" stroke-linejoin="round"/>`);const M=`${S}-h${v}`;T.push(`<clipPath id="${M}"><rect x="0" y="0" width="${t/2}" height="${t}"/></clipPath>`),y.push(`<g transform="translate(${$} 0)" clip-path="url(#${M})"><path d="${Y}" fill="${s}"/></g>`)}else y.push(`<path d="${Y}" transform="translate(${$} 0)" fill="${r}" stroke="${i}" stroke-width="${m}" stroke-linejoin="round"/>`)}return`
    <svg class="rating-stars" width="${p}" height="${t}" viewBox="0 0 ${p} ${t}" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false">
      ${T.length?`<defs>${T.join("")}</defs>`:""}
      ${y.join("")}
    </svg>
  `}const Ne=e=>{const t=e.name||"Анонім",n=e.descr||"",s=Be(e.rate||0);return`
    <div class="swiper-slide">
      <article class="feedback-card">
        <div class="feedback-card__stars">
          ${He(s)}
        </div>
        <p class="feedback-card__text">“${n}”</p>
        <p class="feedback-card__name">${t}</p>
      </article>
    </div>
  `};async function De(){const e=await fetch(`${je}/feedbacks`);if(!e.ok)throw new Error("Feedbacks fetch failed");const t=await e.json();return Array.isArray(t.feedbacks)?t.feedbacks.slice(0,10):[]}function me(){return new ke(".feedbacks-swiper",{modules:[qe,Ce],speed:400,spaceBetween:24,slidesPerView:1,breakpoints:{768:{slidesPerView:2},1024:{slidesPerView:3}},navigation:{prevEl:"#fbPrev",nextEl:"#fbNext",disabledClass:"is-disabled"},pagination:{el:"#fbPagination",clickable:!0,dynamicBullets:!0,dynamicMainBullets:6}})}function ye(){document.querySelectorAll("#fbPrev, #fbNext").forEach(e=>{e.addEventListener("mouseup",()=>e.blur()),e.addEventListener("mouseleave",()=>e.blur()),e.addEventListener("touchend",()=>e.blur(),{passive:!0})})}async function Fe(){const e=document.querySelector("#feedbacksWrapper");if(e)try{const t=await De();e.innerHTML=t.map(Ne).join(""),me(),ye()}catch(t){console.error(t),e.innerHTML='<div class="swiper-slide"><p>Сталася помилка</p></div>',me(),ye()}}const be=new MutationObserver(()=>{document.querySelector("#feedbacksWrapper")&&(be.disconnect(),Fe())});be.observe(document.body,{childList:!0,subtree:!0});document.addEventListener("DOMContentLoaded",()=>{console.log("Footer script initialized"),document.querySelectorAll(".nav-footer a").forEach(t=>{t.addEventListener("click",function(n){n.preventDefault();const s=this.getAttribute("href"),r=document.querySelector(s);r?r.scrollIntoView({behavior:"smooth"}):console.warn(`Элемент с id="${s}" не найден на странице.`)})});const e=document.querySelector(".copyright");if(e){const t=new Date().getFullYear();e.innerHTML=`&copy; ${t} Relume. Всі права захищені`}});(function(){const e=document.getElementById("furnitureModal"),t=e.querySelector(".furn-modal__main-img"),n=e.querySelector(".furn-modal__thumbs"),s=e.querySelector(".furn-modal__title"),r=e.querySelector(".furn-modal__category"),i=e.querySelector(".furn-modal__price"),m=e.querySelector(".furn-modal__rating"),d=e.querySelector(".furn-modal__colors"),b=e.querySelector(".furn-modal__desc"),p=e.querySelector(".furn-modal__sizes"),S=e.querySelector(".furn-modal__order");let y=null;const v=((o,a=document)=>a.querySelector(o))("#productsList"),$=(o,a,A)=>Math.max(a,Math.min(A,o));function M(o){return o?typeof o=="string"?o:typeof o=="object"?o.name??o.title??o.label??Object.values(o).find(a=>typeof a=="string")??"":"":""}function Z(o){const a=o.rating;return typeof a=="number"?a:a&&typeof a=="object"?a.value??a.rate??a.score??a.stars??0:typeof o.stars=="number"?o.stars:typeof o.score=="number"?o.score:typeof o.popularity=="number"?Math.min(5,o.popularity):4.8}function Q(o){const a=Array.isArray(o.colors||o.colours)?o.colors||o.colours:[],A=w=>typeof w=="string"?w:w&&(w.hex??w.color??w.value??w.name)||null,k=a.map(A).filter(Boolean);return k.length?k:["#111","#c0c0c0","#f5f5f5"]}function _(){e.hidden=!1,document.body.classList.add("no-scroll"),e.querySelector("[data-close]").focus({preventScroll:!0}),window.addEventListener("keydown",g)}function c(){e.hidden=!0,document.body.classList.remove("no-scroll"),window.removeEventListener("keydown",g)}function g(o){o.key==="Escape"&&c()}e.addEventListener("click",o=>{(o.target===e||o.target.closest("[data-close]"))&&c()});function X(){const o=d.querySelector('input[name="color"]:checked');return o?o.value:null}S.addEventListener("click",()=>{const o={productId:y==null?void 0:y._id,title:s.textContent,color:X()};c(),document.dispatchEvent(new CustomEvent("open-order-modal",{detail:o})),typeof window.openOrderModal=="function"&&window.openOrderModal(o)});function P(o){var ue;y=o;const a=o.title||o.name||"Модель",A=M(o.category),k=o.price,w=$(Number(Z(o))||0,0,5),D=(ue=o.images)!=null&&ue.length?o.images:o.image?[o.image]:[],V=o.description||"",W=Q(o),q=o.size||o.sizes||o.dimensions||{};s.textContent=a,r.textContent=A,i.textContent=k!=null?`${k} грн`:"",m.style.setProperty("--value",w);const F=D.length?D:[""];t.src=F[0]||"",t.alt=a;const J=F.slice(1,3);n.innerHTML=J.map((h,E)=>`<li>
         <button type="button" aria-label="Зображення ${E+2}">
           <img src="${h}" alt="${a}">
         </button>
       </li>`).join(""),n.onclick=h=>{const E=h.target.closest("button");if(!E)return;const L=E.querySelector("img");L&&(t.src=L.src,n.querySelectorAll("img").forEach(x=>x.removeAttribute("aria-current")),L.setAttribute("aria-current","true"))},d.innerHTML="",W.forEach((h,E)=>{const L=document.createElement("label");L.className="furn-color",L.style.background=h,L.title=typeof h=="string"?h:"Колір";const x=document.createElement("input");x.type="checkbox",x.name="color",x.value=h,E===0&&(x.checked=!0),L.appendChild(x),d.appendChild(L)}),d.onchange=h=>{h.target.name==="color"&&[...d.querySelectorAll('input[name="color"]')].forEach(E=>{E!==h.target&&(E.checked=!1)})},b.textContent=V,p.innerHTML="";const f=typeof q=="object"&&q?q:{},O=f.width||f.w||f.W,j=f.height||f.h||f.H,B=f.depth||f.length||f.d||f.L;if(O&&j&&B)p.innerHTML=`<li>Розміри: ${O} x ${j} x ${B}</li>`;else{const h=[];O&&h.push(`Ширина: ${O}`),j&&h.push(`Висота: ${j}`),B&&h.push(`Глибина: ${B}`);const E=typeof q=="string"?[q]:[];p.innerHTML=[...h,...E].map(L=>`<li>${L}</li>`).join("")}}v==null||v.addEventListener("click",o=>{var D,V,W,q,F,J;const a=o.target.closest(".details-btn");if(!a)return;const A=a.dataset.id||((D=a.closest(".product-card"))==null?void 0:D.dataset.id),k=window.__productsCache instanceof Map?window.__productsCache:null,w=k==null?void 0:k.get(A);if(w)P(w);else{const f=a.closest(".product-card"),O=(W=(V=f==null?void 0:f.querySelector(".gallery-title"))==null?void 0:V.textContent)==null?void 0:W.trim(),j=(q=f==null?void 0:f.querySelector("img"))==null?void 0:q.src,B=(J=(F=f==null?void 0:f.querySelector(".gallery-text"))==null?void 0:F.textContent)==null?void 0:J.trim();P({title:O,images:[j],price:B})}_()})})();const Re="https://furniture-store.b.goit.study/api",u=document.getElementById("modal"),H=document.querySelector(".open-modal-btn"),N=u==null?void 0:u.querySelector(".modal__close"),I=u==null?void 0:u.querySelector(".modal__overlay"),te=u==null?void 0:u.querySelector(".modal__content"),l=u==null?void 0:u.querySelector("form");let K=!1,se={modelId:null,color:null,title:""};const we=()=>z(),Ee=e=>{e.target===I&&z()},Le=e=>{e.key==="Escape"&&(u!=null&&u.classList.contains("active"))&&z()},Se=async e=>{var b;We();let t=!0;const n=l.querySelector('[name="name"]'),s=l.querySelector('[name="email"]'),r=l.querySelector('[name="phone"]'),i=l.querySelector('[name="comment"]');if(n&&!Ge(n.value,2)&&(t=!1,ne(n,"Вкажіть ім’я (мінімум 2 символи).")),Je(s.value)||(t=!1,ne(s,"Некоректний email.")),Ye(r.value)||(t=!1,ne(r,"Некоректний телефон.")),!t){e.preventDefault(),ie("Будь ласка, виправте помилки у формі.","error"),(b=l.querySelector('[aria-invalid="true"]')||s||r)==null||b.focus();return}e.preventDefault();const m={email:s.value.trim(),phone:Ke(r.value),modelId:se.modelId||void 0,color:se.color||void 0,comment:((i==null?void 0:i.value)||"").trim()},d=l.querySelector(".modal__submit");d.disabled=!0;try{const p=await fetch(`${Re}/orders`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(m)});if(!p.ok){let S="Помилка відправки. Спробуйте ще раз.";try{const y=await p.json();y!=null&&y.message&&(S=y.message)}catch{}oe("error",S),d.disabled=!1;return}oe("success","Заявку надіслано! Ми зв’яжемося з вами найближчим часом."),l.reset(),ie(""),z()}catch{oe("error","Мережева помилка. Перевірте з’єднання і спробуйте пізніше."),d.disabled=!1}};function ze(){K||!u||(N==null||N.addEventListener("click",we),I==null||I.addEventListener("click",Ee),document.addEventListener("keydown",Le),l==null||l.addEventListener("submit",Se),K=!0)}function Ve(){!K||!u||(N==null||N.removeEventListener("click",we),I==null||I.removeEventListener("click",Ee),document.removeEventListener("keydown",Le),l==null||l.removeEventListener("submit",Se),K=!1)}function le(e){u&&(u.classList.add("active"),u.setAttribute("aria-hidden","false"),document.body.classList.add("no-scroll"),e&&(se={modelId:e.productId||e.modelId||null,color:e.color||null,title:e.title||""}),ze(),te==null||te.focus({preventScroll:!0}))}function z(){u&&(u.classList.remove("active"),u.setAttribute("aria-hidden","true"),document.body.classList.remove("no-scroll"),Ve(),H==null||H.focus({preventScroll:!0}))}H==null||H.addEventListener("click",()=>le());document.addEventListener("open-order-modal",e=>le(e.detail));function We(){l==null||l.querySelectorAll(".input-error").forEach(e=>e.remove()),l==null||l.querySelectorAll('[aria-invalid="true"]').forEach(e=>e.removeAttribute("aria-invalid")),ie("")}function ne(e,t){e.setAttribute("aria-invalid","true");const n=document.createElement("div");n.className="input-error",n.textContent=t,n.style.cssText="margin-top:6px;color:#b00020;font:600 12px/1.2 Raleway, sans-serif;",e.insertAdjacentElement("afterend",n)}function ie(e,t="info"){if(!l)return;let n=l.querySelector(".form-status");if(!n){n=document.createElement("div"),n.className="form-status";const r=l.querySelector('[type="submit"]');(r?r.parentElement:l).appendChild(n)}n.textContent=e||"";const s=t==="error"?"#b00020":t==="success"?"#0e7a0d":"#6c6f73";n.style.cssText=e?"margin-top:12px;font:600 13px/1.3 Raleway, sans-serif;":"display:none;",e&&(n.style.display="block",n.style.color=s)}function Je(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.trim())}function Ye(e){const t=e.replace(/\D/g,"");return t.length>=10&&t.length<=15}function Ge(e,t){return e.trim().length>=t}function Ke(e){const t=e.replace(/\D/g,"");return t.startsWith("380")?t:t.startsWith("0")?`38${t}`:t}function oe(e,t){const n=window.iziToast;if(!n){console[e==="error"?"error":"log"](t);return}e==="error"?n.error({title:"Помилка",message:t,position:"topRight"}):n.success({title:"Готово",message:t,position:"topRight"})}window.openOrderModal=e=>le(e);window.closeOrderModal=z;window.iziToast=Me;
//# sourceMappingURL=index.js.map
