import{A as pe,r as he,S as ve,N as be,P as we}from"./assets/vendor-oX30Jbj5.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const m of c.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&s(m)}).observe(document,{childList:!0,subtree:!0});function n(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(o){if(o.ep)return;o.ep=!0;const c=n(o);fetch(o.href,c)}})();document.addEventListener("DOMContentLoaded",()=>{console.log("Header script initialized");const e=document.getElementById("burger"),t=document.getElementById("mobileMenu"),n=document.getElementById("closeMenu"),s=document.getElementById("logo"),o=document.body,c=document.getElementById("loader"),m=document.getElementById("notification"),g=(l=!0)=>{e.classList.toggle("active",l),t.classList.toggle("active",l),o.classList.toggle("menu-open",l)};e==null||e.addEventListener("click",()=>g(!0)),n==null||n.addEventListener("click",()=>g(!1)),t==null||t.addEventListener("click",l=>{l.target===t&&g(!1)}),document.addEventListener("keydown",l=>{l.key==="Escape"&&(t!=null&&t.classList.contains("active"))&&g(!1)}),document.querySelectorAll(".mobile-nav-link, .mobile-cta-button").forEach(l=>{l.addEventListener("click",()=>g(!1))}),document.querySelectorAll('a[href^="#"]').forEach(l=>{l.addEventListener("click",v=>{v.preventDefault();const z=l.getAttribute("href").substring(1),x=document.getElementById(z);x==null||x.scrollIntoView({behavior:"smooth",block:"start"})})}),s==null||s.addEventListener("click",l=>{l.preventDefault(),window.scrollTo({top:0,behavior:"smooth"})});const F=()=>c&&(c.style.display="flex"),q=()=>c&&(c.style.display="none");q();const P=(l,v="error")=>{m&&(m.textContent=l,m.className=`notification ${v} show`,setTimeout(()=>m.classList.remove("show"),4e3))},k=async l=>{F();try{if(await new Promise(v=>setTimeout(v,1500)),Math.random()>.2)P(`Каталог "${l}" успішно завантажено!`,"success");else throw new Error}catch{P("Виникла помилка при завантаженні. Спробуйте пізніше.")}finally{q()}};document.querySelectorAll("a, button").forEach(l=>{l.style.cursor="pointer"}),window.devicePixelRatio>1&&console.log("Retina display detected - loading high-res images"),window.loadFurniture=k});const ne=document.querySelectorAll(".furniture-item");ne.forEach(e=>{e.addEventListener("click",()=>{ne.forEach(t=>t.classList.remove("active")),e.classList.add("active")})});const re="https://furniture-store.b.goit.study/api",U=document.getElementById("categoryList"),G=document.getElementById("productsList"),E=document.getElementById("loadMoreBtn");let H="all",T=1,j=8,ce=0,V=!1;async function oe(e){const t=await fetch(e);if(!t.ok)throw new Error(`${t.status} ${t.statusText}`);return t.json()}const Q={categories:()=>oe(`${re}/categories`),furnitures:(e={})=>{const t=new URLSearchParams({page:e.page??1,limit:e.limit??j});return e.category&&e.category!=="all"&&t.set("category",e.category),oe(`${re}/furnitures?${t.toString()}`)}};async function Ee(){const e=await Q.categories(),t=new Map(e.map(n=>[n.name.trim(),n._id]));U.querySelectorAll(".furniture-item").forEach(n=>{var o;const s=(o=n.querySelector(".furniture-text"))==null?void 0:o.textContent.trim();n.dataset.cat=s==="Всі товари"?"all":t.get(s)||""})}function Le(){G.innerHTML=""}function ie(e){window.__productsCache=window.__productsCache||new Map,e.forEach(n=>window.__productsCache.set(n._id,n));const t=e.map(n=>{const s=n.title||n.name||"Без назви",o=n.image||n.img||n.images&&n.images[0]||"",c=n.price!=null?`${n.price} грн`:"";return`<li class="product-card" data-id="${n._id}">
        ${o?`<img src="${o}" alt="${s}">`:""}
        <h3 class="gallery-title">${s}</h3>
        ${c?`<p class="gallery-text">${c}</p>`:""}
        <button class="details-btn" data-id="${n._id}" type="button">Детальніше</button>
      </li>`}).join("");G.insertAdjacentHTML("beforeend",t)}function ae(e){const t=G.querySelectorAll(".product-card").length,n=e<j||t>=ce;E.hidden=n,E.disabled=n}async function le(){T=1;const e=await Q.furnitures({page:T,limit:j,category:H});ce=e.totalItems??e.total??e.furnitures.length,Le(),ie(e.furnitures),ae(e.furnitures.length)}async function Se(){if(!V){V=!0,E.disabled=!0,T+=1;try{const e=await Q.furnitures({page:T,limit:j,category:H});ie(e.furnitures),ae(e.furnitures.length)}finally{V=!1,E.hidden||(E.disabled=!1)}}}U.addEventListener("click",async e=>{const t=e.target.closest(".furniture-item");if(!t)return;const n=t.dataset.cat||"all";n!==H&&(H=n,T=1,U.querySelectorAll(".furniture-item").forEach(s=>s.classList.remove("active")),t.classList.add("active"),await le())});E==null||E.addEventListener("click",Se);(async function(){await Ee(),await le()})();const qe=[{question:"Як здійснюється доставка меблів?",answer:"Ми доставляємо замовлення по всій Україні через надійні служби. Термін доставки зазвичай складає 3-7 днів залежно від регіону."},{question:"Чи є можливість вибрати колір або матеріал?",answer:"Так, у багатьох моделях доступні варіанти оббивки та кольорів. Усі доступні опції вказані на сторінці товару."},{question:"Чи можна повернути товар, якщо він не підійшов?",answer:"Так, ви можете повернути товар протягом 14 днів, якщо він не був у користуванні та збережений у первинному вигляді."},{question:"Чи надаєте ви послугу збирання меблів?",answer:"Так, під час оформлення замовлення можна обрати послугу збирання. Наші майстри зберуть меблі у зручний для вас час."},{question:"Як здійснити оплату?",answer:"Ми приймаємо оплату карткою онлайн, банківським переказом або післяплатою при отриманні."}],ke=document.getElementById("faq-list");qe.forEach(e=>{ke.innerHTML+=`
    <article class="ac">
      <h3 class="ac-header">
        <button type="button" class="ac-trigger">${e.question}</button>
      </h3>
      <div class="ac-panel">
        <p class="ac-text">${e.answer}</p>
      </div>
    </article>
  `});const _e=new pe(".accordion-container",{duration:500,showMultiple:!1});document.addEventListener("click",e=>{document.querySelector(".accordion-container").contains(e.target)||document.querySelectorAll(".accordion-container .ac.is-active").forEach((s,o)=>{const m=Array.from(document.querySelectorAll(".accordion-container .ac")).indexOf(s);m!==-1&&_e.close(m)})});const $e="https://furniture-store.b.goit.study/api",Ae=e=>{const t=Number(e)||0;return t>=3.3&&t<=3.7?3.5:t>=3.8&&t<=4.2?4:Math.round(t*2)/2},Me=e=>{const t=e.name||"Анонім",n=e.descr||"";return`
    <div class="swiper-slide">
      <article class="feedback-card">
        <div class="feedback-card__stars">
          <div class="rating" data-rating="${Ae(e.rate||0)}"></div>
        </div>
        <p class="feedback-card__text">“${n}”</p>
        <p class="feedback-card__name">${t}</p>
      </article>
    </div>
  `};async function xe(){const e=await fetch(`${$e}/feedbacks`);if(!e.ok)throw new Error("Feedbacks fetch failed");const t=await e.json();return Array.isArray(t.feedbacks)?t.feedbacks.slice(0,10):[]}function Ce(e){e.querySelectorAll(".rating").forEach(t=>{const n=Number(t.dataset.rating)||0;he({element:t,readOnly:!0,rating:n,step:.5,max:5,starSize:21})})}function se(){return new ve(".feedbacks-swiper",{modules:[be,we],speed:400,spaceBetween:24,slidesPerView:1,breakpoints:{768:{slidesPerView:2},1024:{slidesPerView:3}},navigation:{prevEl:"#fbPrev",nextEl:"#fbNext",disabledClass:"is-disabled"},pagination:{el:"#fbPagination",clickable:!0,dynamicBullets:!0,dynamicMainBullets:6}})}async function Ie(){const e=document.querySelector("#feedbacksWrapper");if(e)try{const t=await xe();e.innerHTML=t.map(Me).join(""),Ce(document),se()}catch(t){console.error(t),e.innerHTML='<div class="swiper-slide"><p>Сталася помилка</p></div>',se()}}const ue=new MutationObserver(()=>{document.querySelector("#feedbacksWrapper")&&(ue.disconnect(),Ie())});ue.observe(document.body,{childList:!0,subtree:!0});document.addEventListener("DOMContentLoaded",()=>{console.log("Footer script initialized"),document.querySelectorAll(".nav-footer a").forEach(t=>{t.addEventListener("click",function(n){n.preventDefault();const s=this.getAttribute("href"),o=document.querySelector(s);o?o.scrollIntoView({behavior:"smooth"}):console.warn(`Элемент с id="${s}" не найден на странице.`)})});const e=document.querySelector(".copyright");if(e){const t=new Date().getFullYear();e.innerHTML=`&copy; ${t} Relume. Всі права захищені`}});(function(){const e=document.getElementById("furnitureModal"),t=e.querySelector(".furn-modal__main-img"),n=e.querySelector(".furn-modal__thumbs"),s=e.querySelector(".furn-modal__title"),o=e.querySelector(".furn-modal__category"),c=e.querySelector(".furn-modal__price"),m=e.querySelector(".furn-modal__rating"),g=e.querySelector(".furn-modal__colors"),F=e.querySelector(".furn-modal__desc"),q=e.querySelector(".furn-modal__sizes"),P=e.querySelector(".furn-modal__order");let k=null;const v=((r,i=document)=>i.querySelector(r))("#productsList"),z=(r,i,L)=>Math.max(i,Math.min(L,r));function x(r){return r?typeof r=="string"?r:typeof r=="object"?r.name??r.title??r.label??Object.values(r).find(i=>typeof i=="string")??"":"":""}function fe(r){const i=r.rating;return typeof i=="number"?i:i&&typeof i=="object"?i.value??i.rate??i.score??i.stars??0:typeof r.stars=="number"?r.stars:typeof r.score=="number"?r.score:typeof r.popularity=="number"?Math.min(5,r.popularity):4.8}function me(r){const i=Array.isArray(r.colors||r.colours)?r.colors||r.colours:[],L=y=>typeof y=="string"?y:y&&(y.hex??y.color??y.value??y.name)||null,b=i.map(L).filter(Boolean);return b.length?b:["#111","#c0c0c0","#f5f5f5"]}function ye(){e.hidden=!1,document.body.classList.add("no-scroll"),e.querySelector("[data-close]").focus({preventScroll:!0}),window.addEventListener("keydown",Z)}function R(){e.hidden=!0,document.body.classList.remove("no-scroll"),window.removeEventListener("keydown",Z)}function Z(r){r.key==="Escape"&&R()}e.addEventListener("click",r=>{(r.target===e||r.target.closest("[data-close]"))&&R()});function ge(){const r=g.querySelector('input[name="color"]:checked');return r?r.value:null}P.addEventListener("click",()=>{const r={productId:k==null?void 0:k._id,title:s.textContent,color:ge()};R(),document.dispatchEvent(new CustomEvent("open-order-modal",{detail:r})),typeof window.openOrderModal=="function"&&window.openOrderModal(r)});function ee(r){var te;k=r;const i=r.title||r.name||"Модель",L=x(r.category),b=r.price,y=z(Number(fe(r))||0,0,5),C=(te=r.images)!=null&&te.length?r.images:r.image?[r.image]:[],O=r.description||"",B=me(r),w=r.size||r.sizes||r.dimensions||{};s.textContent=i,o.textContent=L,c.textContent=b!=null?`${b} грн`:"",m.style.setProperty("--value",y);const I=C.length?C:[""];t.src=I[0]||"",t.alt=i;const N=I.slice(1,3);n.innerHTML=N.map((f,p)=>`<li>
         <button type="button" aria-label="Зображення ${p+2}">
           <img src="${f}" alt="${i}">
         </button>
       </li>`).join(""),n.onclick=f=>{const p=f.target.closest("button");if(!p)return;const h=p.querySelector("img");h&&(t.src=h.src,n.querySelectorAll("img").forEach(S=>S.removeAttribute("aria-current")),h.setAttribute("aria-current","true"))},g.innerHTML="",B.forEach((f,p)=>{const h=document.createElement("label");h.className="furn-color",h.style.background=f,h.title=typeof f=="string"?f:"Колір";const S=document.createElement("input");S.type="checkbox",S.name="color",S.value=f,p===0&&(S.checked=!0),h.appendChild(S),g.appendChild(h)}),g.onchange=f=>{f.target.name==="color"&&[...g.querySelectorAll('input[name="color"]')].forEach(p=>{p!==f.target&&(p.checked=!1)})},F.textContent=O,q.innerHTML="";const u=typeof w=="object"&&w?w:{},_=u.width||u.w||u.W,$=u.height||u.h||u.H,A=u.depth||u.length||u.d||u.L;if(_&&$&&A)q.innerHTML=`<li>Розміри: ${_} x ${$} x ${A}</li>`;else{const f=[];_&&f.push(`Ширина: ${_}`),$&&f.push(`Висота: ${$}`),A&&f.push(`Глибина: ${A}`);const p=typeof w=="string"?[w]:[];q.innerHTML=[...f,...p].map(h=>`<li>${h}</li>`).join("")}}v==null||v.addEventListener("click",r=>{var C,O,B,w,I,N;const i=r.target.closest(".details-btn");if(!i)return;const L=i.dataset.id||((C=i.closest(".product-card"))==null?void 0:C.dataset.id),b=window.__productsCache instanceof Map?window.__productsCache:null,y=b==null?void 0:b.get(L);if(y)ee(y);else{const u=i.closest(".product-card"),_=(B=(O=u==null?void 0:u.querySelector(".gallery-title"))==null?void 0:O.textContent)==null?void 0:B.trim(),$=(w=u==null?void 0:u.querySelector("img"))==null?void 0:w.src,A=(N=(I=u==null?void 0:u.querySelector(".gallery-text"))==null?void 0:I.textContent)==null?void 0:N.trim();ee({title:_,images:[$],price:A})}ye()})})();const a=document.getElementById("modal"),M=document.querySelector(".open-modal-btn"),W=a==null?void 0:a.querySelector(".modal__close"),J=a==null?void 0:a.querySelector(".modal__overlay"),Y=a==null?void 0:a.querySelector(".modal__content"),d=a==null?void 0:a.querySelector("form");function X(e){var t,n;a&&(a.classList.add("active"),a.setAttribute("aria-hidden","false"),document.body.classList.add("no-scroll"),e&&((t=a.querySelector('[name="product"]'))==null||t.setAttribute("value",e.title||""),(n=a.querySelector('[name="color"]'))==null||n.setAttribute("value",e.color||"")),Y==null||Y.focus({preventScroll:!0}))}function D(){a&&(a.classList.remove("active"),a.setAttribute("aria-hidden","true"),document.body.classList.remove("no-scroll"),M==null||M.focus({preventScroll:!0}))}M==null||M.addEventListener("click",()=>X());document.addEventListener("open-order-modal",e=>X(e.detail));W==null||W.addEventListener("click",D);J==null||J.addEventListener("click",D);document.addEventListener("keydown",e=>{e.key==="Escape"&&(a!=null&&a.classList.contains("active"))&&D()});window.openOrderModal=e=>X(e);window.closeOrderModal=D;function Te(){d==null||d.querySelectorAll(".input-error").forEach(e=>e.remove()),d==null||d.querySelectorAll('[aria-invalid="true"]').forEach(e=>e.removeAttribute("aria-invalid")),de("")}function K(e,t){e.setAttribute("aria-invalid","true");const n=document.createElement("div");n.className="input-error",n.textContent=t,n.style.cssText="margin-top:6px;color:#b00020;font:600 12px/1.2 Raleway, sans-serif;",e.insertAdjacentElement("afterend",n)}function de(e,t="info"){if(!d)return;let n=d.querySelector(".form-status");if(!n){n=document.createElement("div"),n.className="form-status";const o=d.querySelector('[type="submit"]');(o?o.parentElement:d).appendChild(n)}n.textContent=e||"";const s=t==="error"?"#b00020":t==="success"?"#0e7a0d":"#6c6f73";n.style.cssText=e?"margin-top:12px;font:600 13px/1.3 Raleway, sans-serif;":"display:none;",e&&(n.style.display="block",n.style.color=s)}function Pe(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.trim())}function Oe(e){const t=e.replace(/\D/g,"");return t.length>=10&&t.length<=15}function Be(e,t){return e.trim().length>=t}d==null||d.addEventListener("submit",async e=>{var c;Te();let t=!0;const n=d.querySelector('[name="name"]'),s=d.querySelector('[name="email"]'),o=d.querySelector('[name="phone"]');if(n&&!Be(n.value,2)&&(t=!1,K(n,"Вкажіть ім’я (мінімум 2 символи).")),s&&!Pe(s.value)&&(t=!1,K(s,"Некоректний email.")),o&&!Oe(o.value)&&(t=!1,K(o,"Некоректний телефон.")),!t){e.preventDefault(),de("Будь ласка, виправте помилки у формі.","error"),(c=d.querySelector('[aria-invalid="true"]')||n||s||o)==null||c.focus();return}e.preventDefault()});
//# sourceMappingURL=index.js.map
